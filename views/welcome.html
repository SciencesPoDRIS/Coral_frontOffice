<md-tabs md-selected="selectedTab" md-dynamic-height>
    <md-tab label="{{'TAB_HOME' | translate}}">
        <div layout="row" layout-margin>
            <div flex="70">
                <my-search-bar query="query" />
                <div ng-if="highlighted.length > 0">
                    <div>{{'MOST_USED' | translate}}</div>
                    <my-resource-highlighted ng-repeat="resource in highlighted" resource="resource" />
                </div>
                <div ng-if="trial.length > 0">
                    <div>{{'TRIAL' | translate}}</div>
                    <my-resource-card ng-repeat="resource in trial" resource="resource" />
                </div>
                <div ng-if="new.length > 0">
                    <div>{{'NEW' | translate}}</div>
                    <my-resource-card ng-repeat="resource in new" resource="resource" />
                </div>
            </div>
            <div layout="column" flex="30">
                <div>
                    <img src="images/image_01.jpg">
                </div>
                <div class="copyright">© M. Nascimento / Sciences Po</div>
                <div>
                    <a href="http://www.sciencespo.fr/bibliotheque/fr/emprunter/acces-distant-eressources#sous_titre3" target="_blank">{{'USAGE_CONVENTION' | translate}}</a>
                </div>
                <div>
                    <a href="http://www.sciencespo.fr/bibliotheque/fr/emprunter/acces-distant-eressources#sous_titre3" target="_blank">{{'CGU' | translate}}</a>
                </div>
            </div>
        </div>
    </md-tab>
    <md-tab label="{{'TAB_SUBJECTS' | translate}}">
        <div layout="row" layout-margin>
            <div flex="70">
                <my-search-bar query="query" />
                <div>
                    <div ng-repeat="subject in subjects" ng-click="selectSubject();">
                        <span ng-bind-html="subject.key | translate"></span> ({{subject.doc_count}})
                    </div>
                </div>
            </div>
            <div layout="column" flex="30">
                <div>
                    <img src="images/image_01.jpg">
                </div>
                <div class="copyright">© M. Nascimento / Sciences Po</div>
                <div>
                    <a href="http://www.sciencespo.fr/bibliotheque/fr/emprunter/acces-distant-eressources#sous_titre3" target="_blank">{{'USAGE_CONVENTION' | translate}}</a>
                </div>
                <div>
                    <a href="http://www.sciencespo.fr/bibliotheque/fr/emprunter/acces-distant-eressources#sous_titre3" target="_blank">{{'CGU' | translate}}</a>
                </div>
            </div>
        </div>
    </md-tab>
    <md-tab label="{{'TAB_ALL' | translate}}">
        <div layout="row" layout-margin>
            <div flex="70">
                <my-search-bar query="query" />
                <div layout="row">
                    <div class="letter">
                        <a href ng-click="filterByLetter();">
                            {{'ALL' | translate}}
                        </a>
                    </div>
                    <div ng-repeat="letter in alphabet" class="letter">
                        <a href ng-click="filterByLetter()">
                            {{letter}}
                        </a>
                    </div>
                </div>
                <div>
                    <my-resource-card ng-repeat="resource in indexVM.results.hits.hits" resource="resource" />
                </div>
            </div>
            <div layout="column" flex="30">
                <div>
                    <img src="images/image_01.jpg">
                </div>
                <div class="copyright">© M. Nascimento / Sciences Po</div>
                <div>
                    <h3>{{'SUBJECTS' | translate}}</h3>
                    <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation('subjects').field('subjects').size(5)">
                        <li ng-repeat="bucket in aggResult.buckets">
                            <label eui-filter="ejs.TermsFilter('subjects', bucket.key)">
                                <span ng-if="!filter.enabled"><a href="" ng-click="filter.enabled=true">{{bucket.key | translate}} <span class="muted">({{bucket.doc_count}})</span></a>
                                </span>
                                <span ng-if="filter.enabled">{{bucket.key | translate}} <a href="" ng-click="filter.enabled=false" class="facet-remove">x</a></span>
                            </label>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3>{{'CONTENT_TYPE' | translate}}</h3>
                    <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation('types').field('types').size(10)">
                        <li ng-repeat="bucket in aggResult.buckets">
                            <label class="checkbox" eui-filter="ejs.TermsFilter('types', bucket.key)">
                                <input type="checkbox" ng-model="filter.enabled"> {{bucket.key | translate}} ({{bucket.doc_count}})
                            </label>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3>{{'CAMPUS' | translate}}</h3>
                    <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation('sites').field('sites').size(5)">
                        <li ng-repeat="bucket in aggResult.buckets">
                            <label class="checkbox" eui-filter="ejs.TermsFilter('sites', bucket.key)">
                                <input type="checkbox" ng-model="filter.enabled"> {{bucket.key}} ({{bucket.doc_count}})
                            </label>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </md-tab>
</md-tabs>